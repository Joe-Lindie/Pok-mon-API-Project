<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Pokémon Search</title>
  </head>
  <body>
    <main>
      <h1>Pokémon</h1>

      <form action="#">
        <label for="name">Search for your favourite Pokémon!</label> <br />
        <input
          id="name"
          placeholder="Pokémon Name..."
          name="name"
          type="text"
        />

        <button id="submit" type="submit">Find</button>
      </form>

      <section class="card_container">
        <p id="poke_name"></p>
        <div id="poke_img"></div>
      </section>
    </main>

    <script>
      //Grabbed elements needed from DOM
      const form = document.querySelector("form")
      const pokémonName = document.querySelector("#name")
      const submit = document.querySelector("#submit")
      const pokemonName = document.querySelector("#poke_name")

      form.addEventListener("submit", (event) => {
        event.preventDefault()

        //USER CAN ENTER NAME IN ANY CASE LETTER
        const name = pokémonName.value.toLowerCase()

        //FETCH API AND CONVERT TO JSON
        function getPokémons(name) {
          return fetch(`https://pokeapi.co/api/v2/pokemon/${name}`).then(
            (response) => response.json()
          )
        }

        //POKÉMON NAME
        getPokémons(name).then(
          // (attribute) => console.log(attribute)
          (attribute) => (pokemonName.innerHTML = attribute.name)
        )

        //POKÉMON IMAGE
        getPokémons(name)
          .then((attribute) => {
            const image = document.createElement("img")
            image.src = attribute.sprites.front_shiny
            image.alt = "Pokémon Character"

            poke_img.append(image)
          })

          .catch(
            (error) =>
              (pokemonName.innerHTML = "This pokemon does not exist. Sorry!")
          )
      })
    </script>
  </body>
</html>
